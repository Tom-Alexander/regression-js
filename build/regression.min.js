/**
* @license
*
* Regression.JS - Regression functions for javascript
* http://tom-alexander.github.com/regression-js/
*
* copyright(c) 2013 Tom Alexander
* Licensed under the MIT license.
*
**/
!function(){"use strict";var a=function(a,b){for(var c=0,d=0,e=0,f=0,g=a.length,h=0;g>h;h++)c+=a[h][1];f=c/g;for(var h=0;g>h;h++)e+=Math.pow(a[h][1]-f,2),d+=Math.pow(a[h][1]-b[h][1],2);return 1-d/e},b=function(a,b){var c=0,d=0,e=0,f=0,g=0,h=a.length-1,i=new Array(b);for(c=0;h>c;c++){for(f=c,d=c+1;h>d;d++)Math.abs(a[c][d])>Math.abs(a[c][f])&&(f=d);for(e=c;h+1>e;e++)g=a[e][c],a[e][c]=a[e][f],a[e][f]=g;for(d=c+1;h>d;d++)for(e=h;e>=c;e--)a[e][d]-=a[e][c]*a[c][d]/a[c][c]}for(d=h-1;d>=0;d--){for(g=0,e=d+1;h>e;e++)g+=a[e][d]*i[e];i[d]=(a[h][d]-g)/a[d][d]}return i},c={linear:function(b){for(var c=[0,0,0,0,0],d=0,e=[];d<b.length;d++)null!=b[d][1]&&(c[0]+=b[d][0],c[1]+=b[d][1],c[2]+=b[d][0]*b[d][0],c[3]+=b[d][0]*b[d][1],c[4]+=b[d][1]*b[d][1]);for(var f=(d*c[3]-c[0]*c[1])/(d*c[2]-c[0]*c[0]),g=c[1]/d-f*c[0]/d,h=0,i=b.length;i>h;h++){var j=[b[h][0],b[h][0]*f+g];e.push(j)}var k="y = "+Math.round(100*f)/100+"x + "+Math.round(100*g)/100;return{r2:a(b,e),equation:[f,g],points:e,string:k}},linearThroughOrigin:function(a){for(var b=[0,0],c=0,d=[];c<a.length;c++)null!=a[c][1]&&(b[0]+=a[c][0]*a[c][0],b[1]+=a[c][0]*a[c][1]);for(var e=b[1]/b[0],f=0,g=a.length;g>f;f++){var h=[a[f][0],a[f][0]*e];d.push(h)}var i="y = "+Math.round(100*e)/100+"x";return{equation:[e],points:d,string:i}},exponential:function(b){var c=[0,0,0,0,0,0],d=0,e=[];for(j=b.length;j>d;d++)null!=b[d][1]&&(c[0]+=b[d][0],c[1]+=b[d][1],c[2]+=b[d][0]*b[d][0]*b[d][1],c[3]+=b[d][1]*Math.log(b[d][1]),c[4]+=b[d][0]*b[d][1]*Math.log(b[d][1]),c[5]+=b[d][0]*b[d][1]);for(var f=c[1]*c[2]-c[5]*c[5],g=Math.pow(Math.E,(c[2]*c[3]-c[5]*c[4])/f),h=(c[1]*c[4]-c[5]*c[3])/f,i=0,j=b.length;j>i;i++){var k=[b[i][0],g*Math.pow(Math.E,h*b[i][0])];e.push(k)}var l="y = "+Math.round(100*g)/100+"e^("+Math.round(100*h)/100+"x)";return{r2:a(b,e),equation:[g,h],points:e,string:l}},logarithmic:function(b){var c=[0,0,0,0],d=0,e=[];for(i=b.length;i>d;d++)null!=b[d][1]&&(c[0]+=Math.log(b[d][0]),c[1]+=b[d][1]*Math.log(b[d][0]),c[2]+=b[d][1],c[3]+=Math.pow(Math.log(b[d][0]),2));for(var f=(d*c[1]-c[2]*c[0])/(d*c[3]-c[0]*c[0]),g=(c[2]-f*c[0])/d,h=0,i=b.length;i>h;h++){var j=[b[h][0],g+f*Math.log(b[h][0])];e.push(j)}var k="y = "+Math.round(100*g)/100+" + "+Math.round(100*f)/100+" ln(x)";return{r2:a(b,e),equation:[g,f],points:e,string:k}},power:function(b){var c=[0,0,0,0],d=0,e=[];for(i=b.length;i>d;d++)null!=b[d][1]&&(c[0]+=Math.log(b[d][0]),c[1]+=Math.log(b[d][1])*Math.log(b[d][0]),c[2]+=Math.log(b[d][1]),c[3]+=Math.pow(Math.log(b[d][0]),2));for(var f=(d*c[1]-c[2]*c[0])/(d*c[3]-c[0]*c[0]),g=Math.pow(Math.E,(c[2]-f*c[0])/d),h=0,i=b.length;i>h;h++){var j=[b[h][0],g*Math.pow(b[h][0],f)];e.push(j)}var k="y = "+Math.round(100*g)/100+"x^"+Math.round(100*f)/100;return{r2:a(b,e),equation:[g,f],points:e,string:k}},polynomial:function(c,d){"undefined"==typeof d&&(d=2);for(var e=[],f=[],g=[],h=0,i=0,j=0,k=d+1;k>j;j++){for(var l=0,m=c.length;m>l;l++)null!=c[l][1]&&(h+=Math.pow(c[l][0],j)*c[l][1]);e.push(h),h=0;for(var n=[],o=0;k>o;o++){for(var l=0,m=c.length;m>l;l++)null!=c[l][1]&&(i+=Math.pow(c[l][0],j+o));n.push(i),i=0}f.push(n)}f.push(e);for(var p=b(f,k),j=0,m=c.length;m>j;j++){for(var q=0,r=0;r<p.length;r++)q+=p[r]*Math.pow(c[j][0],r);g.push([c[j][0],q])}for(var s="y = ",j=p.length-1;j>=0;j--)s+=j>1?Math.round(p[j]*Math.pow(10,j))/Math.pow(10,j)+"x^"+j+" + ":1==j?Math.round(100*p[j])/100+"x + ":Math.round(100*p[j])/100;return{r2:a(c,g),equation:p,points:g,string:s}},lastvalue:function(b){for(var c=[],d=null,e=0;e<b.length;e++)b[e][1]?(d=b[e][1],c.push([b[e][0],b[e][1]])):c.push([b[e][0],d]);return{r2:a(b,c),equation:[d],points:c,string:""+d}}},d=function(a,b,d){return"string"==typeof a?c[a](b,d):void 0};"undefined"!=typeof exports?module.exports=d:window.regression=d}();